<!DOCTYPE html>
<html lang="ko" xmlns:th="https://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëž­í‚¹</title>
    <link rel="stylesheet" th:href="@{/css/ranking.css}">
    <link th:href="@{/css/style.css}" rel="stylesheet">
</head>

<body>
    <div class="include" th:replace="~{include/header :: header}"></div>
    <main class="page-ranking">
        <div class="container">

            <div class="title-content"><span class="crown">ðŸ‘‘</span>
                <h1>ëž­í‚¹ TOP 10</h1>
            </div>

            <div class="filter">
                <a class="pickBtn" th:href="@{/rank/ranking(pick='like')}"
                    th:classappend="${pick} == 'like' ? ' on' : ''">ì¢‹ì•„ìš”ìˆœ</a>
                <a class="pickBtn" th:href="@{/rank/ranking(pick='answer')}"
                    th:classappend="${pick} == 'answer' ? ' on' : ''">ë‹µë³€ìˆ˜ìˆœ</a>
            </div>

            <section>
                <div class="top" th:each="rank, st : ${rankingList}"
                    th:class="${st.index==0 ? 'top-1' : (st.index==1 ? 'top-2' : (st.index==2 ? 'top-3' : 'top'))}">
                    <div class="left">
                        <div class="num" th:text="${st.index +1 }">1ìœ„</div>
                        <a th:if="${st.index<3 and rank.lawyerIdx != null}"
                           th:href="@{/lawyer/profile/{lawyerIdx}(lawyerIdx=${rank.lawyerIdx})}"
                           class="photo"
                           style="text-decoration: none;">
                            <img th:src="@{${rank.lawyerImgPath}}"
                                 th:alt="${rank.lawyerName}">
                        </a>
                        <div class="photo" th:if="${st.index>=3 or rank.lawyerIdx == null}">
                            <img th:if="${rank.lawyerImgPath != null}" 
                                 th:src="@{${rank.lawyerImgPath}}"
                                 th:alt="${rank.lawyerName}">
                        </div>
                    </div>
                    <div class="among">
                        <a class="name" 
                           th:if="${rank.lawyerIdx != null}"
                           th:href="@{/lawyer/profile/{lawyerIdx}(lawyerIdx=${rank.lawyerIdx})}"
                           style="text-decoration: none; color: inherit;"
                           th:text="${rank.lawyerName}+'&nbsp;ë³€í˜¸ì‚¬'">ê¹€í•˜ë‚˜ ë³€í˜¸ì‚¬</a>
                        <span class="name" 
                              th:if="${rank.lawyerIdx == null}"
                              th:text="${rank.lawyerName}+'&nbsp;ë³€í˜¸ì‚¬'">ê¹€í•˜ë‚˜ ë³€í˜¸ì‚¬</span>
                    </div>
                    <div class="right">
                        <div class="pick" th:if="${pick == 'like'}">ì¢‹ì•„ìš” <span class="v"
                                th:text="${#numbers.formatInteger(rank.lawyerLike, 0, 'COMMA')}">3,451</span></div>
                        <div class="pick" th:if="${pick == 'answer'}">ë‹µë³€ìˆ˜ <span class="v"
                                th:text="${#numbers.formatInteger(rank.lawyerAnswerCnt, 0, 'COMMA')}">3,951</span></div>
                    </div>
                </div>

            </section>

            <section class="category-section">
                <div class="category">
                    <h2>ì¹´í…Œê³ ë¦¬ë³„</h2>
                </div>
                <div class="category-group" th:each="rankI, st : ${rankingMap}" >
                    <h3 class="category-title" th:text="${rankI.key}">ì¹´í…Œê³ ë¦¬ëª…</h3>
                    <div class="grid">
                        <div class="card" th:each="iRank, st : ${rankI.value}" th:if="${st.index < 3}" th:class="${st.index==0 ? 'card1' : (st.index==1 ? 'card2' : (st.index==2 ? 'card3' : 'card'))}">
                            <div class="ranknum" 
                                 th:classappend="${st.index==0 ? 'ranknum1' : (st.index==1 ? 'ranknum2' : (st.index==2 ? 'ranknum3' : ''))}" th:text="${st.index + 1} + 'ìœ„'">1ìœ„</div>
                            <a th:if="${iRank[2] != null}"
                               th:href="@{/lawyer/profile/{lawyerIdx}(lawyerIdx=${iRank[2]})}"
                               class="Cphoto"
                               style="text-decoration: none;">
                                <img th:src="@{${iRank[4]}}" th:alt="${iRank[3]}">
                            </a>
                            <div class="Cphoto" th:if="${iRank[2] == null}">
                                <img th:src="@{${iRank[4]}}" th:alt="${iRank[3]}">
                            </div>
                            <div class="name" th:if="${iRank[2] != null}">
                                <a th:href="@{/lawyer/profile/{lawyerIdx}(lawyerIdx=${iRank[2]})}"
                                   style="text-decoration: none; color: inherit;"
                                   th:text="${iRank[3]} + ' ë³€í˜¸ì‚¬'">ê¹€ë¯¼ì§€ ë³€í˜¸ì‚¬</a>
                            </div>
                            <div class="name" th:if="${iRank[2] == null}" th:text="${iRank[3]} + ' ë³€í˜¸ì‚¬'">ê¹€ë¯¼ì§€ ë³€í˜¸ì‚¬</div>
                            <div class="sub" th:if="${pick == 'answer'}" th:text="'ë‹µë³€ìˆ˜ '+ ${iRank[6]}">ë‹µë³€ìˆ˜ 1,150</div>
                            <div class="sub" th:if="${pick == 'like'}" th:text="'ì¢‹ì•„ìš” '+ ${iRank[5]}">ì¢‹ì•„ìš” 1,200</div>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <div class="include" th:replace="~{include/footer :: footer}"></div>
    <script th:src="@{/js/js.js}"></script>
    <script th:if="${alert}" th:inline="javascript">
        /*<![CDATA[*/
        alert('[[${alert}]]'); // ì „ë‹¬ëœ alert ë©”ì„¸ì§€ ì¶œë ¥
        /*]]>*/
    </script>
    <script th:src="@{/js/chatIcon.js}"></script>
</body>

</html>