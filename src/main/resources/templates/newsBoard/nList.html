<!DOCTYPE html>
<html lang="ko" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${categoryIdx == 2} ? 'NEWS'
                 : (${categoryIdx == 3} ? '동영상' : '칼럼')">
        소식 리스트
    </title>
    <link rel="stylesheet" th:href="@{/css/nList.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="include" th:replace="~{include/header :: header}"></div>

<main class="page-nList">
    <div class="sideMenu" th:replace="~{include/nSide :: nSide}"></div>

    <div class="among">
        <!-- 1(공지)는 여기서 안 쓴다 -->
        <div th:if="${categoryIdx == 1}">
            이 페이지는 공지사항용이 아닙니다.
        </div>

        <section class="frame" th:if="${categoryIdx != 1}">

            <p th:if="${#lists.isEmpty(boards)}">등록된 글이 없습니다.</p>

            <!-- 리스트 -->
            <a th:each="board : ${boards}"
               th:href="@{/newsBoard/detail(newsIdx=${board.newsIdx})}"
               class="news-link item">

                <!-- 왼쪽 텍스트 -->
                <div class="news-text">
                    <h3 class="subject" th:text="${board.newsTitle}">제목</h3>
                    <p class="summary"
                       th:text="${#strings.abbreviate(board.newsContent, 80)}">요약</p>
                    <div class="date" th:text="${board.newsRegDate}">2025-10-30</div>
                </div>

                <!-- 2,3일 때만 썸네일 -->
                <!-- 2,3일 때만 썸네일 -->
<div th:if="${categoryIdx == 2 or categoryIdx == 3}"
     class="thumb" aria-hidden="true">

    <!-- NEWS 이미지 -->
    <img th:if="${categoryIdx == 2 and board.driveFileId != null}"
     th:src="@{'https://drive.google.com/thumbnail?id=' + ${board.driveFileId} + '&sz=220'}"
     alt="thumbnail"
     style="width:100%;height:100%;object-fit:cover;display:block;">

    <!-- 동영상 유튜브 썸네일 -->
    <img th:if="${categoryIdx == 3 and board.videoId != null}"
         th:src="'https://img.youtube.com/vi/' + ${board.videoId} + '/hqdefault.jpg'"
         alt="video thumbnail"
         style="width:100%;height:100%;object-fit:cover;display:block;">

    <!-- 아무것도 없으면 플레이스홀더 -->
    <div th:if="${
            (categoryIdx == 2 and board.newsImgPath == null)
         or (categoryIdx == 3 and board.videoId == null)
        }"
         class="thumb-placeholder">이미지</div>
</div>


                <!-- 4(칼럼)는 썸네일 아예 없음 -->
            </a>

        </section>

        <!-- 페이지네이션 -->
        <nav class="pagination"
             aria-label="페이지네이션"
             th:if="${categoryIdx != 1} and ${page.totalPages} > 1">
            <a th:if="${currentPage > 1}"
               th:href="@{/newsBoard/list(category=${categoryIdx}, page=${currentPage - 1})}"
               class="page-link prev">이전</a>

            <a th:each="p : ${#numbers.sequence(startPage, endPage)}"
               th:href="@{/newsBoard/list(category=${categoryIdx}, page=${p})}"
               th:text="${p}"
               th:classappend="${p} == ${currentPage} ? 'active'">
            </a>

            <a th:if="${currentPage < page.totalPages}"
               th:href="@{/newsBoard/list(category=${categoryIdx}, page=${currentPage + 1})}"
               class="page-link next">다음</a>
        </nav>
    </div>
</main>

<div class="include" th:replace="~{include/footer :: footer}"></div>
<script th:src="@{/js/js.js}"></script>
<script th:src="@{/js/nList.js}"></script>
</body>
</html>
