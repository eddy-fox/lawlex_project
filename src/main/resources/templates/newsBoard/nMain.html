<!DOCTYPE html>
<html lang="ko" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>소식 메인</title>
    <link rel="stylesheet" th:href="@{/css/nMain.css}">
    <link th:href="@{/css/style.css}" rel="stylesheet">
</head>
<body>
<div class="include" th:replace="~{include/header :: header}"></div>

<main class="page-nMain">
    <div class="sideMenu" th:replace="~{include/nSide :: nSide}"></div>

    <div class="wrap">

        <!-- NEWS 영역 (category=2) -->
        <section class="section">
            <div class="section-head">
                <h1 class="title">NEWS</h1>
                <a class="section-more" th:href="@{/newsBoard/list(category=2)}">더보기 ▸</a>
            </div>
            <div class="section-line"></div>

            <div class="grid">
                <!-- 컨트롤러에서 3개만 잘라서 보냈으니까 그대로 반복 -->
                <a class="item"
                   th:each="board : ${newsList}"
                   th:href="@{/newsBoard/detail(newsIdx=${board.newsIdx})}">
                    <div class="thumb">
                        <!-- DB에 경로 저장한 경우 -->
                        <img th:if="${board.newsImgPath != null}"
                             th:src="${board.newsImgPath}"
                             referrerpolicy="no-referrer"
                             alt="news image"
                             style="width:100%; height:100%; object-fit:cover; display:block;">
                        <!-- 이미지 없을 때 -->
                        <div th:if="${board.newsImgPath == null}" class="thumb-placeholder">이미지</div>
                    </div>
                    <h1 class="title-sub" th:text="${board.newsTitle}">뉴스 제목</h1>
                    <div class="desc" th:text="${#strings.abbreviate(board.newsContent, 60)}">뉴스 요약문</div>
                </a>
            </div>
        </section>

        <!-- 동영상 영역 (category=3) -->
        <section class="section">
            <div class="section-head">
                <h1 class="title">동영상</h1>
                <a class="section-more" th:href="@{/newsBoard/list(category=3)}">더보기 ▸</a>
            </div>
            <div class="section-line"></div>

            <div class="grid">
                <a class="item"
                   th:each="board : ${videoList}"
                   th:href="@{/newsBoard/detail(newsIdx=${board.newsIdx})}">
                    <div class="thumb video">
                        <!-- 1) videoId 있으면 유튜브 썸네일 -->
                        <img th:if="${board.videoId != null}"
                             th:src="@{'https://img.youtube.com/vi/' + ${board.videoId} + '/0.jpg'}"
                             alt="video thumbnail"
                             style="width:100%; height:100%; object-fit:cover; display:block;">
                        <!-- 2) videoId 없고 이미지 경로 있으면 그거 -->
                        <img th:if="${board.videoId == null and board.newsImgPath != null}"
                             th:src="${board.newsImgPath}"
                             alt="video image"
                             style="width:100%; height:100%; object-fit:cover; display:block;">
                        <!-- 3) 둘 다 없으면 플레이스홀더 -->
                        <div th:if="${board.videoId == null and board.newsImgPath == null}" class="thumb-placeholder">
                            영상 썸네일
                        </div>
                    </div>
                    <h1 class="title-sub" th:text="${board.newsTitle}">동영상 제목</h1>
                    <div class="desc" th:text="${#strings.abbreviate(board.newsContent, 60)}">영상 설명 요약</div>
                </a>
            </div>
        </section>

        <!-- 칼럼 영역 (category=4) -->
        <section class="section">
            <div class="section-head">
                <h1 class="title">칼럼</h1>
                <a class="section-more" th:href="@{/newsBoard/list(category=4)}">더보기 ▸</a>
            </div>
            <div class="section-line"></div>

            <div class="grid">
                <a class="item"
                   th:each="board : ${columnList}"
                   th:href="@{/newsBoard/detail(newsIdx=${board.newsIdx})}">
                    <h1 class="title-sub" th:text="${board.newsTitle}">칼럼 제목</h1>
                    <div class="desc" th:text="${#strings.abbreviate(board.newsContent, 60)}">
                        칼럼 요약 내용
                    </div>
                </a>
            </div>
        </section>

        <!-- 공지 영역 (category=1) -->
        <section class="section">
            <div class="notice">
                <div class="notice-head">
                    <div>공지사항</div>
                    <a class="section-more" th:href="@{/newsBoard/list(category=1)}">더보기 ▸</a>
                </div>

                <table class="notice-table">
                    <thead>
                    <tr>
                        <th class="col-num">번호</th>
                        <th>제목</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="board : ${noticeList}">
                        <td th:text="${board.newsIdx}">1</td>
                        <td>
                            <a th:href="@{/newsBoard/detail(newsIdx=${board.newsIdx})}"
                               th:text="${board.newsTitle}">
                                공지사항 제목입니다
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </section>

    </div>
</main>

<div class="include" th:replace="~{include/footer :: footer}"></div>
<script th:src="@{/js/js.js}"></script>
<script th:src="@{/js/nMain.js}"></script>
</body>
</html>
