<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>광고 등록</title>
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/all/adInfo.css}">
</head>
<body>
    <!-- 헤더 -->
    <div class="include" th:replace="~{include/header :: header}"></div>

    <!-- 메인 -->
    <main class="page-adinfo">

      <!-- 사이드 바 -->
      <div class="sideMenu" th:replace="~{include/aSide :: aSide}"></div>

      <div class="container">

        <!-- 광고 등록 -->
        <form th:action="@{/admin/adRegistration}" method="post" class="ad-card"
            th:object="${adRegistration}" enctype="multipart/form-data">
        <div class="form-grid">
            <div class="small">
                <label>광고 이름: </label><input type="text" th:field="*{adName}" id="adName" />
            </div>
            <div class="small">
                <label>신청자: </label><input type="text" th:field="*{LawyerName}" id="LawyerName" />
            </div>
            <div class="small">
                <label>게시일: </label><input type="text" th:field="*{adStartDate}" id="adStartDate" readonly />
            </div>
            <div class="small">
                <label>게시기간: </label>
                <select th:field="*{adDuration}" id="adDuration">
                    <option th:value="7" th:text="7 + '일'"></option>
                    <option th:value="14" th:text="14 + '일'"></option>
                    <option th:value="21" th:text="21 + '일'"></option>
                    <option th:value="28" th:text="28 + '일'"></option>
                </select>
            </div>
            <div class="small">
                <label>이미지: </label><input type="text" th:field="*{adImgPath}" id="adImgPath" readonly/>
                <button type="button" id="findImageBtn">찾아보기</button>
                <input type="file" id="adImageFile" accept="image/*" style="display: none;">
                <img id="adPreview" src="#" alt="이미지 미리보기"> 
            </div>
            <div class="small">
                <label>링크: </label><input type="text" th:field="*{adLink}" id="adLink" />
            </div>
        </div>
        
        <div class="actions-row">
            <button type="submit" id="submitBtn">등록하기</button>
        </div>
        </form>

      </div>
    </main>

    <!-- 푸터 -->
    <div class="include" th:replace="~{include/footer :: footer}"></div>

</body>

<script>
    // 다음주 월요일 계산 함수
    function getNextMonday() {
        const today = new Date();
        const day = today.getDay(); // 0:일, 1:월, ..., 6:토
        const diff = (8 - day) % 7; // 다음주 월요일까지 남은 일수
        const nextMonday = new Date(today);
        nextMonday.setDate(today.getDate() + diff);
        nextMonday.setHours(0,0,0,0); // 00:00
        return nextMonday;
    }

    window.addEventListener('DOMContentLoaded', (event) => {
        const nextMonday = getNextMonday();
        const yyyy = nextMonday.getFullYear();
        const mm = String(nextMonday.getMonth() + 1).padStart(2, '0'); // 월은 0~11
        const dd = String(nextMonday.getDate()).padStart(2, '0');

        // input[type="text"]에 yyyy-MM-dd 형태로 세팅
        document.getElementById('adStartDate').value = `${yyyy}-${mm}-${dd}`;
    });
</script>
</html>
