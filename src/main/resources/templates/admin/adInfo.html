<!DOCTYPE html>
<html lang="ko" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>광고 상세</title>
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/all/adInfo.css}">
</head>
<body>
    <!-- 헤더 -->
    <div class="include" th:replace="~{include/header :: header}"></div>

    <!-- ✅ 로그인 상태별 마이페이지 진입 버튼 (추가) -->
    <div class="wrap" style="display:flex; justify-content:flex-end; gap:8px; margin:12px 0;">
      <a th:if="${session.loginUser != null}"
         class="primary-btn"
         th:href="@{/member/mypage}">
        마이페이지
      </a>
      <a th:if="${session.loginUser == null}"
         class="small-btn"
         th:href="@{/member/login(need='mypage')}">
        로그인하고 마이페이지
      </a>
    </div>
    <!-- ✅ 여기까지 추가 -->

    <!-- 메인 -->
    <main class="page-adinfo">

      <!-- 사이드 바 -->
      <div class="sideMenu" th:replace="~{include/aSide :: aSide}"></div>

      <div class="container">

        <!-- 광고 상세 -->
        <form class="ad-card" action="" method="post">
          <div class="form-grid">
            <div class="small">광고 이름:</div>
            <div th:text="${ad.adName}"></div>

            <div class="small">신청자:</div>
            <div th:text="${ad.lawyerName}"></div>

            <div class="small">게시일:</div>
            <div th:text="${ad.adStartDate}"></div>

            <div class="small">게시기간:</div>
            <div th:text="${ad.adDuration} + ' 일'"></div>

            <div class="small">조회수:</div>
            <div th:text="${ad.adViews} + ' 회'"></div>

            <div class="small">이미지:</div>
            <div class="form-thumb">
                <img th:if="${ad.adImgPath != null}" th:src="${ad.adImgPath}" th:alt="${ad.adName}"/>
                <img th:unless="${ad.adImgPath != null}" th:src="@{/img/test.png}" alt="기본 이미지"/>
            </div>

            <div class="small">링크:</div>
            <div>
                <a th:href="${ad.adLink}" th:text="${ad.adLink}" target="_blank"></a>
            </div>
          </div>

          <div class="actions-row">
            <a th:href="@{/admin/adModify(adIdx=${ad.adIdx})}" class="btn">수정</a>
            <a th:href="@{/admin/adDelete(adIdx=${ad.adIdx})}" class="btn">삭제</a>
          </div>
        </form>

      </div>
    </main>

    <!-- 푸터 -->
    <div class="include" th:replace="~{include/footer :: footer}"></div>
    <script th:src="@{/js/js.js}"></script>
    <script th:src="@{/js/chatIcon.js}"></script>
</body>

<script src="/js/admin.js"></script>
<script th:if="${alert}" th:inline="javascript">
        /*<![CDATA[*/
        alert('[[${alert}]]'); // 전달된 alert 메세지 출력
        /*]]>*/
    </script>
</html>
