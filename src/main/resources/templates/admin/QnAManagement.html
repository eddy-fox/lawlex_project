<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ë¬¸ì˜ê¸€ ê´€ë¦¬</title>
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/all/QnAManagement.css}">
</head>
<body>
    <!-- í—¤ë” -->
    <div class="include" th:replace="~{include/header :: header}"></div>

    <!-- ë©”ì¸ -->
    <main class="page-QnAManagement">

      <!-- ì‚¬ì´ë“œ ë°” -->
      <div class="sideMenu" th:replace="~{include/aSide :: aSide}"></div>
      
      <div class="container">      

        <!-- ìƒë‹¨ ë°” -->
        <div class="topbar" style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;margin-bottom:12px">
          <div class="tabs">
            <span id="newQnA" onclick="newQnA()" class="tab active">ìƒˆë¡œìš´ ë¬¸ì˜</span>
            <span class="sep">|</span>
            <span id="completedQnA" onclick="completedQnA()" class="tab">ë‹µë³€ ì™„ë£Œ</span>
          </div>

          <form th:action="@{/admin/QnAManagement}" method="post" class="searchbar" style="display:flex;align-items:center;gap:8px">
            <select id="searchType" name="searchType" class="select">
                <option value="idx" selected>ê¸€ë²ˆí˜¸</option>
                <option value="title">ì œëª©</option>
                <option value="content">ë‚´ìš©</option>
                <option value="id">ì‘ì„±ì</option>
            </select>

            <input type="search" id="search" name="keyword" class="input" placeholder="ê²€ìƒ‰">
            <button type="submit" class="btn primary">ê²€ìƒ‰</button>
          </form>
        </div>

        <!-- ìƒˆë¡œìš´ ë¬¸ì˜ê¸€ ë¦¬ìŠ¤íŠ¸ -->
        <section id="newQuestion" class="card" style="display:block">
          <div class="scroll">
            <table>
              <thead>
                <tr>
                    <th style="width:8%" class="center">ê¸€ë²ˆí˜¸</th>
                    <th style="width:12%" class="center">ì‘ì„±ì</th>
                    <th>ì œëª©</th>
                    <th style="width:10%" class="center">ì‘ì„±ì¼</th>
                    <th style="width:8%" class="center">ë¹„ë°€ê¸€</th>
                </tr>
              </thead>
              <tbody id="tbodyNew">
                <tr th:onclick="|location.href='/question/qnaInfo?qIdx=' + ${nq.qIdx}|" style="cursor: pointer;" th:each="nq : ${newQuestions}">
                    <td class="center"><span th:text="${nq.qIdx}"></span></td>
                    <td class="center">
                      <span th:if="${nq.memberId != null and nq.lawyerId == null}" th:text="${nq.memberId}"></span>
                      <span th:unless="${nq.memberId != null and nq.lawyerId == null}" th:text="${nq.lawyerId}"></span>
                    </td>
                    <td><span th:text="${nq.qTitle}"></span></td>
                    <td class="center"><span th:text="${nq.qRegDate}"></span></td>
                    <td class="center">
                      <span th:if="${nq.qSecret == 1}">ğŸ”’</span>
                      <span th:unless="${nq.qSecret == 1}">  </span>
                    </td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- ë‹µë³€ ì™„ë£Œí•œ ë¬¸ì˜ê¸€ ë¦¬ìŠ¤íŠ¸ -->
        <section id="completedQuestion" class="card" style="display:none;">
          <div class="scroll">
            <table>
              <thead>
                <tr>
                    <th style="width:8%" class="center">ê¸€ë²ˆí˜¸</th>
                    <th style="width:12%" class="center">ì‘ì„±ì</th>
                    <th>ì œëª©</th>
                    <th style="width:10%" class="center">ì‘ì„±ì¼</th>
                    <th style="width:8%" class="center">ë¹„ë°€ê¸€</th>
                </tr>
              </thead>
              <tbody id="tbodyDone">
                <tr th:onclick="|location.href='/question/qnaInfo?qIdx=' + ${cq.qIdx}|" style="cursor: pointer;" th:each="cq : ${completedQuestions}">
                    <td class="center"><span th:text="${cq.qIdx}"></span></td>
                    <td class="center">
                      <span th:if="${cq.memberId != null and cq.lawyerId == null}" th:text="${cq.memberId}"></span>
                      <span th:unless="${cq.memberId != null and cq.lawyerId == null}" th:text="${cq.lawyerId}"></span>
                    </td>
                    <td><span th:text="${cq.qTitle}"></span></td>
                    <td class="center"><span th:text="${cq.qRegDate}"></span></td>
                    <td class="center">
                      <span th:if="${cq.qSecret == 1}">ğŸ”’</span>
                      <span th:unless="${cq.qSecret == 1}">  </span>
                    </td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </div>
    </main>

    <!-- í‘¸í„° -->
    <div class="include" th:replace="~{include/footer :: footer}"></div>

</body>

<!-- ì‚¬ì´ë“œë°” -->
<script src="/js/admin.js"></script>
<script>
    function newQnA() {
        document.getElementById('newQuestion').style.display = 'block';
        document.getElementById('newQnA').classList.add('active');
        document.getElementById('completedQuestion').style.display = 'none';
        document.getElementById('completedQnA').classList.remove('active');
    }
    function completedQnA() {
        document.getElementById('newQuestion').style.display = 'none';
        document.getElementById('newQnA').classList.remove('active');
        document.getElementById('completedQuestion').style.display = 'block';
        document.getElementById('completedQnA').classList.add('active');
    }
</script>
<script th:if="${alert}" th:inline="javascript">
        /*<![CDATA[*/
        alert('[[${alert}]]'); // ì „ë‹¬ëœ alert ë©”ì„¸ì§€ ì¶œë ¥
        /*]]>*/
    </script>
</html>